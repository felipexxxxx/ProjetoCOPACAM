<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criação de Referências</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<div class="container mt-5">
    <h1 class="text-center">Criação de Referências COPACAM</h1>
    <form id="descricaoForm" class="mt-4">
        <!-- Espécie -->
        <div class="mb-3">
            <label for="descricaoEspecie" class="form-label">Espécie:</label>
            <div class="input-group">
                <input type="text" id="descricaoEspecie" class="form-control" placeholder="Espécie" readonly>
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Opções</button>
                <ul class="dropdown-menu" id="dropdownEspecie">
                    <!-- Dinamicamente preenchido -->
                </ul>
            </div>
        </div>

        <!-- Apresentação -->
        <div class="mb-3">
            <label for="descricaoApresentacao" class="form-label">Apresentação:</label>
            <div class="input-group">
                <input type="text" id="descricaoApresentacao" class="form-control" placeholder="Apresentação" readonly>
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Opções</button>
                <ul class="dropdown-menu" id="dropdownApresentacao">
                    <!-- Dinamicamente preenchido -->
                </ul>
            </div>
        </div>

        <!-- Condição -->
        <div class="mb-3">
            <label for="descricaoCondicao" class="form-label">Condição:</label>
            <div class="input-group">
                <input type="text" id="descricaoCondicao" class="form-control" placeholder="Condição" readonly>
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Opções</button>
                <ul class="dropdown-menu" id="dropdownCondicao">
                    <!-- Dinamicamente preenchido -->
                </ul>
            </div>
        </div>

        <!-- Estado -->
        <div class="mb-3">
            <label for="descricaoEstado" class="form-label">Estado:</label>
            <div class="input-group">
                <input type="text" id="descricaoEstado" class="form-control" placeholder="Estado" readonly>
                <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Opções</button>
                <ul class="dropdown-menu" id="dropdownEstado">
                    <!-- Dinamicamente preenchido -->
                </ul>
            </div>
        </div>

        <!-- Classificação -->
        <div class="mb-3">
            <label for="descricaoClassificacao" class="form-label">Classificação:</label>
            <input type="text" id="descricaoClassificacao" class="form-control" placeholder="Classificação (ex.: 40/50)" oninput="AtualizarTabelaReferencia()">
        </div>

        <!-- Pacote -->
        <div class="mb-3">
            <label for="descricaoPacote" class="form-label">Pacote:</label>
            <input type="text" id="descricaoPacote" class="form-control" placeholder="Pacote (ex.: 150G ou 1KG)" oninput="AtualizarTabelaReferencia()">
        </div>

        <!-- Caixa -->
        <div class="mb-3">
            <label for="descricaoCaixa" class="form-label">Caixa:</label>
            <input type="text" id="descricaoCaixa" class="form-control" placeholder="Caixa (ex.: 6KG)" oninput="AtualizarTabelaReferencia()">
        </div>
    </form>

    <!-- Resultados -->
    <div class="mt-3">
        <div class="d-flex justify-content-between align-items-center mb-2">
            <h3 class="mb-0">Referência do Código</h3>
        </div>
        <table class="table table-bordered text-center">
            <thead class="thead-dark">
                <tr>
                    <th>Espécie</th>
                    <th>Apresentação</th>
                    <th>Condição</th>
                    <th>Estado</th>
                    <th>Classificação</th>
                    <th>Pacote</th>
                    <th>Caixa</th>
                    <th>Referência completa</th>
                </tr>
            </thead>
            <tbody id="tabelaDescricao" class="table">
                <tbody id="tabelaDescricao">
                    <tr>
                </tbody>
                
            </tbody>
        </table>
        <div class="copiar-botao-container">
            <button class="btn btn-primary" onclick="copiarTabela1('tabelaDescricao')">Copiar</button>
        </div>
        <h3 class="mt-3">Descrição Completa do Código</h3>
        <table class="table table-bordered text-center">
            <thead class="thead-dark">
                <tr>
                    <th>Descrição Completa</th>
                </tr>
            </thead>
            <tbody id="tabelaDescricaoCompleta">
                <td>Nenhuma descrição disponível</td>
            </tbody>
        </table>
  
    <!-- Botão de copiar para a tabela "Descrição Completa do Camarão" -->
    <div class="copiar-botao-container">
    <button class="btn btn-primary" onclick="copiarTabela2('tabelaDescricaoCompleta')">Copiar</button>
    </div>
    </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>
    <script src="script.js"></script>
    <script src="dropdown.js"></script>
    <script src="util.js"></script>
    <script>
        function copiarTabela1(tabelaId) {
        const tabela = document.getElementById(tabelaId);
        if (!tabela) return;

        let texto = '';
        const linhas = tabela.getElementsByTagName('tr');
        for (let i = 0; i < linhas.length; i++) {
            const colunas = linhas[i].getElementsByTagName('td');
            if (colunas.length > 0) {
                const ultimaColuna = colunas[colunas.length - 1].innerText.trim();
                texto += ultimaColuna + '\n'; // Adiciona a última coluna e uma nova linha
            }
        }

        navigator.clipboard.writeText(texto).then(
            () => alert('Última coluna copiada para a área de transferência!'),
            (err) => alert('Erro ao copiar a tabela: ' + err)
        );
    }
    </script>

    <script>
        function copiarTabela2(idTabela) {
            // Captura o elemento da tabela pelo ID
            const tabela = document.getElementById(idTabela);
        
            // Pega o texto interno da tabela e remove espaços extras
            const texto = tabela.innerText.trim();
        
            // Copia o texto para a área de transferência
            navigator.clipboard.writeText(texto)
                .then(() => {
                    alert("Texto copiado com sucesso!");
                })
                .catch(err => {
                    alert("Erro ao copiar o texto.");
                    console.error(err);
                });
        }
        
    </script>
</body>
</html>


